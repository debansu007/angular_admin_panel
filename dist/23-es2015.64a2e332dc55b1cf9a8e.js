(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{v1BX:function(n,e,l){"use strict";l.r(e);var o=l("8Y7J"),t=l("ZJFI"),a=l("njzu");class i{constructor(n,e,l,o,t){this.afAuth=n,this.router=e,this.databaseServ=l,this.toastrService=o,this.dataServ=t,this.canDisplay=!1,this.ckeditorContent="",this.pdfSrc="",this.fileName="",this.filBase64=null,this.uploadFolderName="privacy",this.uploadFileName="privacy.pdf",this.collectionName="terms_n_privacy",this.documentName="privacy",this.loading=!1,this.afAuth.authState.subscribe(n=>{n?(this.canDisplay=!0,this.getPrivacy(),this.dataServ.userSource.subscribe(n=>{console.log("user page",n),n&&"admin"!=n.userType&&this.router.navigate(["pages/report"])},n=>{console.log(n)})):(this.canDisplay=!1,this.router.navigate(["auth/login"]))})}getPrivacy(){this.databaseServ.getTerms(this.collectionName,this.documentName).subscribe(n=>{n&&n.showHtml&&(this.ckeditorContent=n.showHtml)},n=>{console.log(n)})}ngOnInit(){this.getTermsPdfUrl()}getTermsPdfUrl(){this.databaseServ.getFileUrl(this.uploadFolderName,this.uploadFileName).subscribe(n=>{console.log("url",n),n&&(this.pdfSrc=n)},n=>{console.log(n)})}changeListener(n){this.readThis(n.target)}readThis(n){var e=n.files[0];this.fileName=e.name;var l=new FileReader;l.onloadend=(n=>{this.filBase64=l.result}),l.readAsDataURL(e)}uploadPdf(){this.loading=!0,this.databaseServ.storePdf(this.filBase64,this.uploadFolderName,this.uploadFileName).then(n=>{console.log("uploaded",n),this.toastrService.success("File uploaded successfully.","Success!"),this.loading=!1,this.fileName="",this.getTermsPdfUrl()}).catch(n=>{console.log(n),this.toastrService.danger("Something went wrong.","Error!"),this.loading=!1})}onChange(n){}onEditorChange(n){}onReady(n){}onFocus(n){}onBlur(n){}onContentDom(n){}onFileUploadRequest(n){}onFileUploadResponse(n){}onPaste(n){}onDrop(n){}save(){this.loading=!0,this.databaseServ.saveTerms(this.collectionName,this.documentName,this.ckeditorContent).then(n=>{this.loading=!1,this.toastrService.success("Terms text updated.","Success!")}).catch(n=>{this.loading=!1,console.log(n),this.toastrService.danger("Something went wrong.","Error!")})}}class s{}var r=l("pMnS"),u=l("jXVt"),d=l("tKwJ"),c=l("3vqK"),p=l("EB9a"),g=l("s7LF"),m=l("SVse"),h=l("irV9"),v=l("iInd"),f=o["\u0275crt"]({encapsulation:0,styles:[[".upload-wrap[_ngcontent-%COMP%]{height:300px;background:#acbfff;border-radius:5px;border:3px dotted #000;position:relative}.fileInput[_ngcontent-%COMP%]{z-index:99999;opacity:0;width:100%;height:100%}.uploadTxt[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}.padding-10[_ngcontent-%COMP%]{padding:10px}.loading-screen[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:5px;background:#e2e2e2}.loading-img[_ngcontent-%COMP%]{width:50%;height:100%}.uploadBtn[_ngcontent-%COMP%]{width:200px}.goIcon[_ngcontent-%COMP%]{font-size:15px;margin:5px}"]],data:{}});function b(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,15,"nb-card-body",[["style","min-height: 500px;"]],null,null,null,u.Ab,u.E)),o["\u0275did"](1,49152,null,0,d.mb,[],null,null),(n()(),o["\u0275eld"](2,0,null,0,8,"ckeditor",[["debounce","500"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"editorChange"],[null,"ready"],[null,"focus"],[null,"blur"],[null,"contentDom"],[null,"fileUploadRequest"],[null,"fileUploadResponse"],[null,"paste"],[null,"drop"]],function(n,e,l){var o=!0,t=n.component;return"ngModelChange"===e&&(o=!1!==(t.ckeditorContent=l)&&o),"change"===e&&(o=!1!==t.onChange(l)&&o),"editorChange"===e&&(o=!1!==t.onEditorChange(l)&&o),"ready"===e&&(o=!1!==t.onReady(l)&&o),"focus"===e&&(o=!1!==t.onFocus(l)&&o),"blur"===e&&(o=!1!==t.onBlur(l)&&o),"contentDom"===e&&(o=!1!==t.onContentDom(l)&&o),"fileUploadRequest"===e&&(o=!1!==t.onFileUploadRequest(l)&&o),"fileUploadResponse"===e&&(o=!1!==t.onFileUploadResponse(l)&&o),"paste"===e&&(o=!1!==t.onPaste(l)&&o),"drop"===e&&(o=!1!==t.onDrop(l)&&o),o},c.b,c.a)),o["\u0275did"](3,13287424,null,2,p.CKEditorComponent,[o.NgZone],{config:[0,"config"],readonly:[1,"readonly"],debounce:[2,"debounce"]},{change:"change",editorChange:"editorChange",ready:"ready",blur:"blur",focus:"focus",contentDom:"contentDom",fileUploadRequest:"fileUploadRequest",fileUploadResponse:"fileUploadResponse",paste:"paste",drop:"drop"}),o["\u0275qud"](603979776,1,{toolbarButtons:1}),o["\u0275qud"](603979776,2,{toolbarGroups:1}),o["\u0275pod"](6,{uiColor:0,height:1}),o["\u0275prd"](1024,null,g.NG_VALUE_ACCESSOR,function(n){return[n]},[p.CKEditorComponent]),o["\u0275did"](8,671744,null,0,g.NgModel,[[8,null],[8,null],[8,null],[6,g.NG_VALUE_ACCESSOR]],{model:[0,"model"]},{update:"ngModelChange"}),o["\u0275prd"](2048,null,g.NgControl,null,[g.NgModel]),o["\u0275did"](10,16384,null,0,g.NgControlStatus,[[4,g.NgControl]],null,null),(n()(),o["\u0275eld"](11,0,null,0,4,"div",[["class","col-12 text-center"],["style","margin: 10px 0;"]],null,null,null,null,null)),(n()(),o["\u0275eld"](12,16777216,null,null,3,"button",[["nbButton",""]],[[2,"appearance-filled",null],[2,"appearance-outline",null],[2,"appearance-ghost",null],[2,"appearance-hero",null],[2,"full-width",null],[1,"aria-disabled",0],[2,"btn-disabled",null],[1,"tabindex",0],[2,"size-tiny",null],[2,"size-small",null],[2,"size-medium",null],[2,"size-large",null],[2,"size-giant",null],[2,"status-primary",null],[2,"status-info",null],[2,"status-success",null],[2,"status-warning",null],[2,"status-danger",null],[2,"shape-rectangle",null],[2,"shape-round",null],[2,"shape-semi-round",null],[2,"icon-start",null],[2,"icon-end",null],[2,"transitions",null],[2,"nb-spinner-container",null]],[[null,"click"]],function(n,e,l){var t=!0,a=n.component;return"click"===e&&(t=!1!==o["\u0275nov"](n,13).onClick(l)&&t),"click"===e&&(t=!1!==a.save()&&t),t},u.vb,u.z)),o["\u0275did"](13,4243456,null,0,d.P,[o.Renderer2,o.ElementRef,o.ChangeDetectorRef],{disabled:[0,"disabled"]},null),o["\u0275did"](14,81920,null,0,d.Fd,[o.ViewContainerRef,o.ComponentFactoryResolver,o.Renderer2,o.ElementRef],{nbSpinner:[0,"nbSpinner"]},null),(n()(),o["\u0275ted"](-1,0,["Update"]))],function(n,e){var l=e.component,o=n(e,6,0,"#3366ff","350");n(e,3,0,o,!1,"500"),n(e,8,0,l.ckeditorContent),n(e,13,0,l.loading),n(e,14,0,l.loading)},function(n,e){n(e,2,0,o["\u0275nov"](e,10).ngClassUntouched,o["\u0275nov"](e,10).ngClassTouched,o["\u0275nov"](e,10).ngClassPristine,o["\u0275nov"](e,10).ngClassDirty,o["\u0275nov"](e,10).ngClassValid,o["\u0275nov"](e,10).ngClassInvalid,o["\u0275nov"](e,10).ngClassPending),n(e,12,1,[o["\u0275nov"](e,13).filled,o["\u0275nov"](e,13).outline,o["\u0275nov"](e,13).ghost,o["\u0275nov"](e,13).hero,o["\u0275nov"](e,13).fullWidth,o["\u0275nov"](e,13).disabled,o["\u0275nov"](e,13).disabled,o["\u0275nov"](e,13).tabbable,o["\u0275nov"](e,13).tiny,o["\u0275nov"](e,13).small,o["\u0275nov"](e,13).medium,o["\u0275nov"](e,13).large,o["\u0275nov"](e,13).giant,o["\u0275nov"](e,13).primary,o["\u0275nov"](e,13).info,o["\u0275nov"](e,13).success,o["\u0275nov"](e,13).warning,o["\u0275nov"](e,13).danger,o["\u0275nov"](e,13).rectangle,o["\u0275nov"](e,13).round,o["\u0275nov"](e,13).semiRound,o["\u0275nov"](e,13).iconLeft,o["\u0275nov"](e,13).iconRight,o["\u0275nov"](e,13).transitions,o["\u0275nov"](e,14).isSpinnerExist])})}function C(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,16777216,null,null,7,"nb-card",[["nbSpinnerSize","giant"],["nbSpinnerStatus","primary"]],[[2,"size-tiny",null],[2,"size-small",null],[2,"size-medium",null],[2,"size-large",null],[2,"size-giant",null],[2,"status-primary",null],[2,"status-info",null],[2,"status-success",null],[2,"status-warning",null],[2,"status-danger",null],[2,"accent",null],[2,"accent-primary",null],[2,"accent-info",null],[2,"accent-success",null],[2,"accent-warning",null],[2,"accent-danger",null],[2,"nb-spinner-container",null]],null,null,u.Bb,u.F)),o["\u0275did"](1,49152,null,0,d.nb,[],null,null),o["\u0275did"](2,81920,null,0,d.Fd,[o.ViewContainerRef,o.ComponentFactoryResolver,o.Renderer2,o.ElementRef],{spinnerStatus:[0,"spinnerStatus"],spinnerSize:[1,"spinnerSize"],nbSpinner:[2,"nbSpinner"]},null),(n()(),o["\u0275eld"](3,0,null,0,2,"nb-card-header",[],null,null,null,u.Db,u.H)),o["\u0275did"](4,49152,null,0,d.qb,[],null,null),(n()(),o["\u0275ted"](-1,0,[" Edit Privacy Policy "])),(n()(),o["\u0275and"](16777216,null,1,1,null,b)),o["\u0275did"](7,16384,null,0,m.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){var l=e.component;n(e,2,0,"primary","giant",!l.canDisplay),n(e,7,0,l.canDisplay)},function(n,e){n(e,0,1,[o["\u0275nov"](e,1).tiny,o["\u0275nov"](e,1).small,o["\u0275nov"](e,1).medium,o["\u0275nov"](e,1).large,o["\u0275nov"](e,1).giant,o["\u0275nov"](e,1).primary,o["\u0275nov"](e,1).info,o["\u0275nov"](e,1).success,o["\u0275nov"](e,1).warning,o["\u0275nov"](e,1).danger,o["\u0275nov"](e,1).hasAccent,o["\u0275nov"](e,1).primaryAccent,o["\u0275nov"](e,1).infoAccent,o["\u0275nov"](e,1).successAccent,o["\u0275nov"](e,1).warningAccent,o["\u0275nov"](e,1).dangerAccent,o["\u0275nov"](e,2).isSpinnerExist])})}function y(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"ngx-privacy",[],null,null,null,C,f)),o["\u0275did"](1,114688,null,0,i,[h.a,v.l,t.a,d.Zd,a.a],null,null)],function(n,e){n(e,1,0)},null)}var S=o["\u0275ccf"]("ngx-privacy",i,y,{},{},[]),R=l("kQDJ");l.d(e,"PrivacyModuleNgFactory",function(){return _});var _=o["\u0275cmf"](s,[],function(n){return o["\u0275mod"]([o["\u0275mpd"](512,o.ComponentFactoryResolver,o["\u0275CodegenComponentFactoryResolver"],[[8,[r.a,u.m,S]],[3,o.ComponentFactoryResolver],o.NgModuleRef]),o["\u0275mpd"](4608,m.NgLocalization,m.NgLocaleLocalization,[o.LOCALE_ID,[2,m["\u0275angular_packages_common_common_a"]]]),o["\u0275mpd"](4608,g["\u0275angular_packages_forms_forms_o"],g["\u0275angular_packages_forms_forms_o"],[]),o["\u0275mpd"](1073742336,m.CommonModule,m.CommonModule,[]),o["\u0275mpd"](1073742336,g["\u0275angular_packages_forms_forms_d"],g["\u0275angular_packages_forms_forms_d"],[]),o["\u0275mpd"](1073742336,g.FormsModule,g.FormsModule,[]),o["\u0275mpd"](1073742336,v.p,v.p,[[2,v.u],[2,v.l]]),o["\u0275mpd"](1073742336,d.Ke,d.Ke,[]),o["\u0275mpd"](1073742336,d.mc,d.mc,[d.lc]),o["\u0275mpd"](1073742336,d.rb,d.rb,[]),o["\u0275mpd"](1073742336,d.pc,d.pc,[]),o["\u0275mpd"](1073742336,d.Q,d.Q,[]),o["\u0275mpd"](1073742336,d.Gd,d.Gd,[]),o["\u0275mpd"](1073742336,R.CKEditorModule,R.CKEditorModule,[]),o["\u0275mpd"](1073742336,s,s,[]),o["\u0275mpd"](1024,v.j,function(){return[[{path:"",component:i}]]},[])])})}}]);